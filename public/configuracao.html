<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações - Sistema de Ramais</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="configuraçao.css">

</head>
<body>
    
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="back-button" onclick="goToDashboard()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/>
                    <circle cx="12" cy="12" r="3"/>
                </svg>
                Configurações do Sistema
            </div>
        </div>
        <img id="headerAvatar" class="user-avatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%233b82f6'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='40' fill='white' text-anchor='middle' dominant-baseline='central'%3EU%3C/text%3E%3C/svg%3E" alt="Avatar">
    </header>

    <!-- Main Container -->
    <div class="main-container">
        
        <!-- Sidebar Menu -->
        <aside class="sidebar">
            <div class="menu-title">Configurações Gerais</div>
            <div class="menu-item active" data-section="general">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6m-6-6h6m6 0h6m-3.9-3.9l-4.2 4.2m0 0l-4.2 4.2m0-8.4l4.2 4.2"></path>
                </svg>
                
                <span>Geral</span>
            </div>
            <div class="menu-item" data-section="audio">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                </svg>
                <span>Áudio e Vídeo</span>
            </div>
            <div class="menu-item" data-section="notifications">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                </svg>
                <span>Notificações</span>
            </div>
            <div class="menu-item" data-section="devices">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                    <path d="M16 3h4v4"></path>
                    <path d="M8 3H4v4"></path>
                </svg>
                <span>Dispositivos</span>
            </div>
            <div class="menu-item" data-section="storage">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                    <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                    <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                </svg>
                <span>Armazenamento</span>
            </div>
            <div class="menu-item" data-section="advanced">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="4" y1="21" x2="4" y2="14"></line>
                    <line x1="4" y1="10" x2="4" y2="3"></line>
                    <line x1="12" y1="21" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12" y2="3"></line>
                    <line x1="20" y1="21" x2="20" y2="16"></line>
                    <line x1="20" y1="12" x2="20" y2="3"></line>
                    <line x1="1" y1="14" x2="7" y2="14"></line>
                    <line x1="9" y1="8" x2="15" y2="8"></line>
                    <line x1="17" y1="16" x2="23" y2="16"></line>
                </svg>
                <span>Avançado</span>
            </div>
        </aside>

        <!-- Content Area -->
        <main class="content">
            <!-- General Section -->
            <section id="general" class="content-section active">
                <div class="card">
                    <h2 class="card-title">Configurações Gerais</h2>
                    <p class="card-subtitle">Personalize as configurações básicas do sistema</p>

                    <div class="form-group">
                        <label class="form-label">Idioma do Sistema</label>
                        <select id="language" class="form-select">
                            <option value="pt-BR" selected>Português (Brasil)</option>
                            <option value="en-US">English (US)</option>
                            <option value="es-ES">Español</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Fuso Horário</label>
                        <select id="timezone" class="form-select">
                            <option value="America/Sao_Paulo" selected>Brasília (GMT-3)</option>
                            <option value="America/New_York">Nova York (GMT-5)</option>
                            <option value="Europe/London">Londres (GMT+0)</option>
                        </select>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Iniciar Automaticamente</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Abrir o sistema ao iniciar o computador</div>
                        </div>
                        <div class="switch" id="autoStartSwitch" onclick="toggleSwitch('autoStartSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Minimizar para Bandeja</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Manter o app em execução ao fechar</div>
                        </div>
                        <div class="switch" id="traySwitch" onclick="toggleSwitch('traySwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <button class="save-button" onclick="saveGeneralSettings()">Salvar Configurações</button>
                </div>
            </section>

            <!-- Audio/Video Section -->
            <section id="audio" class="content-section">
                <div class="card">
                    <h2 class="card-title">Áudio e Vídeo</h2>
                    <p class="card-subtitle">Configure dispositivos de entrada e saída</p>

                    <div class="form-group">
                        <label class="form-label">Microfone</label>
                        <select id="microphone" class="form-select">
                            <option value="default" selected>Microfone Padrão</option>
                            <option value="mic1">Microfone Integrado</option>
                            <option value="mic2">Microfone USB</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Alto-falantes</label>
                        <select id="speakers" class="form-select">
                            <option value="default" selected>Alto-falantes Padrão</option>
                            <option value="speaker1">Alto-falantes Integrados</option>
                            <option value="speaker2">Fone de Ouvido</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Câmera</label>
                        <select id="camera" class="form-select">
                            <option value="default" selected>Câmera Padrão</option>
                            <option value="cam1">Câmera Integrada</option>
                            <option value="cam2">Webcam USB</option>
                        </select>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Cancelamento de Ruído</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Reduzir ruídos de fundo nas chamadas</div>
                        </div>
                        <div class="switch active" id="noiseCancelSwitch" onclick="toggleSwitch('noiseCancelSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Eco Cancelamento</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Eliminar eco durante chamadas</div>
                        </div>
                        <div class="switch active" id="echoCancelSwitch" onclick="toggleSwitch('echoCancelSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <button class="save-button" onclick="saveAudioSettings()">Salvar Configurações</button>
                </div>
            </section>

            <!-- Notifications Section -->
            <section id="notifications" class="content-section">
                <div class="card">
                    <h2 class="card-title">Notificações</h2>
                    <p class="card-subtitle">Controle como e quando você recebe notificações</p>

                    <div class="notification-item">
                        <div class="notification-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <h4>Chamadas Recebidas</h4>
                            <p>Notificar quando receber chamadas</p>
                        </div>
                        <div class="switch active" id="callNotifSwitch" onclick="toggleSwitch('callNotifSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="notification-item">
                        <div class="notification-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"/>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <h4>Mensagens</h4>
                            <p>Notificar quando receber novas mensagens</p>
                        </div>
                        <div class="switch active" id="msgNotifSwitch" onclick="toggleSwitch('msgNotifSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="notification-item">
                        <div class="notification-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                            </svg>
                        </div>
                        <div class="notification-content">
                            <h4>Sons de Notificação</h4>
                            <p>Reproduzir som ao receber notificações</p>
                        </div>
                        <div class="switch active" id="soundNotifSwitch" onclick="toggleSwitch('soundNotifSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Não Perturbe</label>
                        <select id="dndMode" class="form-select">
                            <option value="off" selected>Desativado</option>
                            <option value="always">Sempre ativo</option>
                            <option value="schedule">Programar horário</option>
                        </select>
                    </div>

                    <button class="save-button" onclick="saveNotificationSettings()">Salvar Configurações</button>
                </div>
            </section>

            <!-- Devices Section -->
            <section id="devices" class="content-section">
                <div class="card">
                    <h2 class="card-title">Dispositivos Conectados</h2>
                    <p class="card-subtitle">Gerencie os dispositivos onde você está conectado</p>

                    <div class="device-item">
                        <div class="device-info">
                            <div class="device-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                                    <line x1="8" y1="21" x2="16" y2="21"></line>
                                    <line x1="12" y1="17" x2="12" y2="21"></line>
                                </svg>
                            </div>
                            <div class="device-details">
                                <h4>Windows - Chrome</h4>
                                <p>Última atividade: Agora • São Paulo, BR</p>
                            </div>
                        </div>
                        <div class="device-badge">Atual</div>
                    </div>

                    <div class="device-item">
                        <div class="device-info">
                            <div class="device-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
                                    <line x1="12" y1="18" x2="12.01" y2="18"></line>
                                </svg>
                            </div>
                            <div class="device-details">
                                <h4>iPhone 14 Pro</h4>
                                <p>Última atividade: 2 horas atrás • São Paulo, BR</p>
                            </div>
                        </div>
                        <div class="device-badge inactive">Inativo</div>
                    </div>

                    <div class="device-item">
                        <div class="device-info">
                            <div class="device-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                                    <path d="M16 3h4v4"></path>
                                </svg>
                            </div>
                            <div class="device-details">
                                <h4>MacBook Pro</h4>
                                <p>Última atividade: 1 dia atrás • Rio de Janeiro, BR</p>
                            </div>
                        </div>
                        <div class="device-badge inactive">Inativo</div>
                    </div>

                    <button class="save-button danger-button" onclick="disconnectDevices()">Desconectar Todos os Dispositivos</button>
                </div>
            </section>

            <!-- Storage Section -->
            <section id="storage" class="content-section">
                <div class="card">
                    <h2 class="card-title">Armazenamento e Backup</h2>
                    <p class="card-subtitle">Gerencie o armazenamento de dados do sistema</p>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-value">2.4 GB</div>
                            <div class="stat-label">Arquivos de Mídia</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">580 MB</div>
                            <div class="stat-label">Mensagens</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">125 MB</div>
                            <div class="stat-label">Gravações</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">3.1 GB</div>
                            <div class="stat-label">Total Usado</div>
                        </div>
                    </div>

                    <div class="backup-card">
                        <h3>Backup Automático</h3>
                        <p>Último backup: Hoje às 03:00</p>
                        <button class="backup-button" onclick="createBackup()">Criar Backup Agora</button>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Backup Automático</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Realizar backup diário automaticamente</div>
                        </div>
                        <div class="switch active" id="autoBackupSwitch" onclick="toggleSwitch('autoBackupSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Limpar Dados Antigos</label>
                        <select id="cleanupPeriod" class="form-select">
                            <option value="never" selected>Nunca</option>
                            <option value="30">Após 30 dias</option>
                            <option value="60">Após 60 dias</option>
                            <option value="90">Após 90 dias</option>
                        </select>
                    </div>

                    <button class="save-button danger-button" onclick="clearCache()">Limpar Cache e Dados Temporários</button>
                </div>
            </section>

            <!-- Advanced Section -->
            <section id="advanced" class="content-section">
                <div class="card">
                    <h2 class="card-title">Configurações Avançadas</h2>
                    <p class="card-subtitle">Opções avançadas para usuários experientes</p>

                    <div class="info-row">
                        <span class="info-label">Versão do Sistema</span>
                        <span class="info-value">v2.5.1</span>
                    </div>

                    <div class="info-row">
                        <span class="info-label">Última Atualização</span>
                        <span class="info-value">15 de Outubro de 2024</span>
                    </div>

                    <div class="info-row">
                        <span class="info-label">ID do Dispositivo</span>
                        <span class="info-value">ABC-123-XYZ-789</span>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Modo Desenvolvedor</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Ativar ferramentas de desenvolvedor</div>
                        </div>
                        <div class="switch" id="devModeSwitch" onclick="toggleSwitch('devModeSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="toggle-switch">
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Logs de Depuração</div>
                            <div style="font-size: 0.875rem; color: #64748b;">Registrar logs detalhados para diagnóstico</div>
                        </div>
                        <div class="switch" id="debugLogsSwitch" onclick="toggleSwitch('debugLogsSwitch')">
                            <div class="switch-slider"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Servidor SIP</label>
                        <input type="text" id="sipServer" class="form-input" placeholder="sip.servidor.com" value="sip.cloudpbx.com">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Porta SIP</label>
                        <input type="number" id="sipPort" class="form-input" placeholder="5060" value="5060">
                    </div>

                    <button class="save-button" onclick="saveAdvancedSettings()">Salvar Configurações</button>

                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid #e2e8f0;">
                        <h3 style="font-size: 1.125rem; font-weight: 600; color: #ef4444; margin-bottom: 1rem;">Zona de Perigo</h3>
                        <button class="save-button danger-button" onclick="resetAllSettings()">Redefinir Todas as Configurações</button>
                        <p style="font-size: 0.875rem; color: #64748b; margin-top: 0.5rem; text-align: center;">Esta ação não pode ser desfeita</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Adicione esta seção após a seção "Advanced" -->
<section id="appearance" class="content-section">
    <div class="card">
        <h2 class="card-title">Aparência</h2>
        <p class="card-subtitle">Personalize a aparência do sistema</p>

        <div class="form-group">
            <label class="form-label">Tema de Cor</label>
            <div class="theme-options" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; margin-top: 1rem;">
                <div class="theme-option selected" data-theme="blue" onclick="selectTheme('blue')" style="padding: 1.5rem; border: 2px solid #e2e8f0; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; background: white;">
                    <div class="theme-color" style="width: 60px; height: 60px; border-radius: 10px; margin: 0 auto 0.75rem; background: linear-gradient(135deg, #3b82f6, #1d4ed8);"></div>
                    <div>Azul Padrão</div>
                </div>
                <div class="theme-option" data-theme="dark" onclick="selectTheme('dark')" style="padding: 1.5rem; border: 2px solid #e2e8f0; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; background: white;">
                    <div class="theme-color" style="width: 60px; height: 60px; border-radius: 10px; margin: 0 auto 0.75rem; background: linear-gradient(135deg, #1e293b, #0f172a);"></div>
                    <div>Escuro</div>
                </div>
                <div class="theme-option" data-theme="light" onclick="selectTheme('light')" style="padding: 1.5rem; border: 2px solid #e2e8f0; border-radius: 10px; text-align: center; cursor: pointer; transition: all 0.3s ease; background: white;">
                    <div class="theme-color" style="width: 60px; height: 60px; border-radius: 10px; margin: 0 auto 0.75rem; background: linear-gradient(135deg, #ffffff, #f1f5f9);"></div>
                    <div>Branco Puro</div>
                </div>
            </div>
        </div>

        <div class="toggle-switch">
            <div>
                <div style="font-weight: 600; margin-bottom: 0.25rem;">Modo Escuro</div>
                <div style="font-size: 0.875rem; color: #64748b;">Ative o tema escuro para reduzir cansaço visual</div>
            </div>
            <div class="switch" id="darkModeSwitch" onclick="toggleDarkMode()">
                <div class="switch-slider"></div>
            </div>
        </div>

        <button class="save-button" onclick="saveAppearanceSettings()">Salvar Aparência</button>
    </div>
</section>

<!-- Adicione esta seção após a seção "Appearance" -->
<section id="profile" class="content-section">
    <div class="card">
        <h2 class="card-title">Perfil do Usuário</h2>
        <p class="card-subtitle">Gerencie suas informações pessoais</p>

        <div style="display: flex; align-items: center; gap: 2rem; padding: 2rem; background: #f8fafc; border-radius: 10px; margin-bottom: 2rem;">
            <img id="profilePhotoPreview" style="width: 120px; height: 120px; border-radius: 50%; object-fit: cover; border: 4px solid #3b82f6;" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='50' fill='%233b82f6'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='40' fill='white' text-anchor='middle' dominant-baseline='central'%3EU%3C/text%3E%3C/svg%3E" alt="Foto de perfil">
            <div>
                <h3 style="margin-bottom: 0.5rem;">Foto do perfil</h3>
                <p style="color: #64748b; font-size: 0.875rem; margin-bottom: 1rem;">JPG, PNG ou SVG. Máximo 2MB.</p>
                <input type="file" id="photoUpload" accept="image/*" style="display: none;">
                <button class="upload-button" onclick="document.getElementById('photoUpload').click()" style="background: #3b82f6; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">Alterar Foto</button>
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Nome Completo</label>
            <input type="text" id="fullName" class="form-input" placeholder="Digite seu nome completo">
        </div>

        <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="email" class="form-input" placeholder="seu.email@empresa.com">
        </div>

        <div class="form-group">
            <label class="form-label">Telefone</label>
            <input type="tel" id="phone" class="form-input" placeholder="(00) 00000-0000">
        </div>

        <button class="save-button" onclick="saveProfileSettings()">Salvar Perfil</button>
    </div>
</section>

    <script>
        // Initialize data from localStorage
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('systemSettings')) || {};
            
            // General
            if (settings.language) document.getElementById('language').value = settings.language;
            if (settings.timezone) document.getElementById('timezone').value = settings.timezone;
            if (settings.autoStart) document.getElementById('autoStartSwitch').classList.add('active');
            if (settings.tray) document.getElementById('traySwitch').classList.add('active');
            
            // Audio
            if (settings.microphone) document.getElementById('microphone').value = settings.microphone;
            if (settings.speakers) document.getElementById('speakers').value = settings.speakers;
            if (settings.camera) document.getElementById('camera').value = settings.camera;
            
            // Notifications
            if (settings.dndMode) document.getElementById('dndMode').value = settings.dndMode;
            
            // Storage
            if (settings.cleanupPeriod) document.getElementById('cleanupPeriod').value = settings.cleanupPeriod;
            
            // Advanced
            if (settings.sipServer) document.getElementById('sipServer').value = settings.sipServer;
            if (settings.sipPort) document.getElementById('sipPort').value = settings.sipPort;
            if (settings.devMode) document.getElementById('devModeSwitch').classList.add('active');
            if (settings.debugLogs) document.getElementById('debugLogsSwitch').classList.add('active');

            // Load user photo
            const photoUrl = localStorage.getItem('userPhoto');
            if (photoUrl) {
                document.getElementById('headerAvatar').src = photoUrl;
            }
        }

        // Navigation
        document.querySelectorAll('.menu-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                const section = this.getAttribute('data-section');
                document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
                document.getElementById(section).classList.add('active');
            });
        });

        // Toggle Switch
        function toggleSwitch(id) {
            const switchEl = document.getElementById(id);
            switchEl.classList.toggle('active');
        }

        // Save Functions
        function saveGeneralSettings() {
            const settings = JSON.parse(localStorage.getItem('systemSettings')) || {};
            settings.language = document.getElementById('language').value;
            settings.timezone = document.getElementById('timezone').value;
            settings.autoStart = document.getElementById('autoStartSwitch').classList.contains('active');
            settings.tray = document.getElementById('traySwitch').classList.contains('active');
            
            localStorage.setItem('systemSettings', JSON.stringify(settings));
            showNotification('Configurações gerais salvas com sucesso!');
        }

        function saveAudioSettings() {
            const settings = JSON.parse(localStorage.getItem('systemSettings')) || {};
            settings.microphone = document.getElementById('microphone').value;
            settings.speakers = document.getElementById('speakers').value;
            settings.camera = document.getElementById('camera').value;
            settings.noiseCancel = document.getElementById('noiseCancelSwitch').classList.contains('active');
            settings.echoCancel = document.getElementById('echoCancelSwitch').classList.contains('active');
            
            localStorage.setItem('systemSettings', JSON.stringify(settings));
            showNotification('Configurações de áudio salvas com sucesso!');
        }

        function saveNotificationSettings() {
            const settings = JSON.parse(localStorage.getItem('systemSettings')) || {};
            settings.callNotif = document.getElementById('callNotifSwitch').classList.contains('active');
            settings.msgNotif = document.getElementById('msgNotifSwitch').classList.contains('active');
            settings.soundNotif = document.getElementById('soundNotifSwitch').classList.contains('active');
            settings.dndMode = document.getElementById('dndMode').value;
            
            localStorage.setItem('systemSettings', JSON.stringify(settings));
            showNotification('Configurações de notificação salvas!');
        }

        function saveAdvancedSettings() {
            const settings = JSON.parse(localStorage.getItem('systemSettings')) || {};
            settings.devMode = document.getElementById('devModeSwitch').classList.contains('active');
            settings.debugLogs = document.getElementById('debugLogsSwitch').classList.contains('active');
            settings.sipServer = document.getElementById('sipServer').value;
            settings.sipPort = document.getElementById('sipPort').value;
            
            localStorage.setItem('systemSettings', JSON.stringify(settings));
            showNotification('Configurações avançadas salvas!');
        }

        function disconnectDevices() {
            if (confirm('Deseja desconectar todos os dispositivos? Você precisará fazer login novamente em cada um.')) {
                showNotification('Todos os dispositivos foram desconectados!');
            }
        }

        function createBackup() {
            showNotification('Criando backup... Isso pode levar alguns minutos.');
            setTimeout(() => {
                showNotification('Backup criado com sucesso!');
            }, 2000);
        }

        function clearCache() {
            if (confirm('Deseja limpar todos os dados temporários e cache? Esta ação não pode ser desfeita.')) {
                showNotification('Cache limpo com sucesso! 245 MB liberados.');
            }
        }

        function resetAllSettings() {
            if (confirm('ATENÇÃO: Esta ação irá redefinir todas as configurações para o padrão. Deseja continuar?')) {
                if (confirm('Tem certeza? Esta ação não pode ser desfeita.')) {
                    localStorage.removeItem('systemSettings');
                    showNotification('Todas as configurações foram redefinidas!');
                    setTimeout(() => location.reload(), 2000);
                }
            }
        }

        // Navigation
        function goToDashboard() {
            window.location.href = 'dashboard.html';
        }

        // Notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 2rem;
                background: #10b981;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 10px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                animation: slideIn 0.3s ease;
                font-weight: 600;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize on load
        window.addEventListener('DOMContentLoaded', loadSettings);



        // Adicione estas funções ao JavaScript existente

// Função para obter a chave do usuário atual
function getUserKey(key) {
    const currentUser = localStorage.getItem('currentUser');
    return currentUser ? `${currentUser}_${key}` : key;
}

// Identificar usuário ao carregar
function identifyUser() {
    const session = localStorage.getItem('cloudpbx_session');
    if (session) {
        const userData = JSON.parse(session);
        const userIdentifier = userData.email || userData.nome.replace(/\s+/g, '_').toLowerCase();
        localStorage.setItem('currentUser', userIdentifier);
    }
}

// Initialize data from localStorage
function loadSettings() {
    identifyUser();
    
    const settings = JSON.parse(localStorage.getItem(getUserKey('systemSettings'))) || {};
    
    // General
    if (settings.language) document.getElementById('language').value = settings.language;
    if (settings.timezone) document.getElementById('timezone').value = settings.timezone;
    if (settings.autoStart) document.getElementById('autoStartSwitch').classList.add('active');
    if (settings.tray) document.getElementById('traySwitch').classList.add('active');
    
    // Audio
    if (settings.microphone) document.getElementById('microphone').value = settings.microphone;
    if (settings.speakers) document.getElementById('speakers').value = settings.speakers;
    if (settings.camera) document.getElementById('camera').value = settings.camera;
    
    // Notifications
    if (settings.dndMode) document.getElementById('dndMode').value = settings.dndMode;
    
    // Storage
    if (settings.cleanupPeriod) document.getElementById('cleanupPeriod').value = settings.cleanupPeriod;
    
    // Advanced
    if (settings.sipServer) document.getElementById('sipServer').value = settings.sipServer;
    if (settings.sipPort) document.getElementById('sipPort').value = settings.sipPort;
    if (settings.devMode) document.getElementById('devModeSwitch').classList.add('active');
    if (settings.debugLogs) document.getElementById('debugLogsSwitch').classList.add('active');

    // Appearance
    const theme = localStorage.getItem(getUserKey('colorTheme')) || 'blue';
    selectTheme(theme);
    
    const darkMode = localStorage.getItem(getUserKey('darkMode')) === 'true';
    if (darkMode) {
        document.getElementById('darkModeSwitch').classList.add('active');
        applyDarkMode(true);
    } else {
        applyTheme(theme);
    }

    // Profile
    const profile = JSON.parse(localStorage.getItem(getUserKey('userProfile'))) || {};
    document.getElementById('fullName').value = profile.fullName || '';
    document.getElementById('email').value = profile.email || '';
    document.getElementById('phone').value = profile.phone || '';
    
    // Load user photo
    const photoUrl = localStorage.getItem(getUserKey('userPhoto'));
    if (photoUrl) {
        document.getElementById('headerAvatar').src = photoUrl;
        document.getElementById('profilePhotoPreview').src = photoUrl;
    }
}

// Photo Upload
document.getElementById('photoUpload').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file && file.size <= 2000000) {
        const reader = new FileReader();
        reader.onload = function(event) {
            const photoUrl = event.target.result;
            document.getElementById('profilePhotoPreview').src = photoUrl;
            document.getElementById('headerAvatar').src = photoUrl;
            localStorage.setItem(getUserKey('userPhoto'), photoUrl);
            showNotification('Foto atualizada com sucesso!');
        };
        reader.readAsDataURL(file);
    } else {
        alert('Arquivo muito grande. Máximo 2MB.');
    }
});

// Toggle Dark Mode
function toggleDarkMode() {
    const switchEl = document.getElementById('darkModeSwitch');
    const isActive = switchEl.classList.contains('active');
    
    if (isActive) {
        switchEl.classList.remove('active');
        applyDarkMode(false);
        localStorage.setItem(getUserKey('darkMode'), 'false');
    } else {
        switchEl.classList.add('active');
        applyDarkMode(true);
        localStorage.setItem(getUserKey('darkMode'), 'true');
    }
    
    showNotification('Modo escuro ' + (isActive ? 'desativado' : 'ativado') + '!');
}

// Aplicar modo escuro
function applyDarkMode(enabled) {
    if (enabled) {
        document.body.classList.add('dark-theme');
        document.body.classList.remove('light-theme', 'blue-theme');
    } else {
        const theme = localStorage.getItem(getUserKey('colorTheme')) || 'blue';
        document.body.classList.remove('dark-theme');
        document.body.classList.add(`${theme}-theme`);
    }
}

// Theme Selection
function selectTheme(theme) {
    document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('selected'));
    document.querySelector(`[data-theme="${theme}"]`).classList.add('selected');
    localStorage.setItem(getUserKey('colorTheme'), theme);
    
    const darkMode = localStorage.getItem(getUserKey('darkMode')) === 'true';
    if (!darkMode) {
        applyTheme(theme);
    }
}

// Função para aplicar o tema
function applyTheme(theme) {
    document.body.className = '';
    document.body.classList.add(`${theme}-theme`);
}

// Save Appearance Settings
function saveAppearanceSettings() {
    const darkMode = document.getElementById('darkModeSwitch').classList.contains('active');
    localStorage.setItem(getUserKey('darkMode'), darkMode);
    
    showNotification('Configurações de aparência salvas!');
}

// Save Profile Settings
function saveProfileSettings() {
    const profile = JSON.parse(localStorage.getItem(getUserKey('userProfile'))) || {};
    profile.fullName = document.getElementById('fullName').value;
    profile.email = document.getElementById('email').value;
    profile.phone = document.getElementById('phone').value;
    
    localStorage.setItem(getUserKey('userProfile'), JSON.stringify(profile));
    showNotification('Perfil atualizado com sucesso!');
}

// Update all save functions to use user-specific keys
function saveGeneralSettings() {
    const settings = JSON.parse(localStorage.getItem(getUserKey('systemSettings'))) || {};
    settings.language = document.getElementById('language').value;
    settings.timezone = document.getElementById('timezone').value;
    settings.autoStart = document.getElementById('autoStartSwitch').classList.contains('active');
    settings.tray = document.getElementById('traySwitch').classList.contains('active');
    
    localStorage.setItem(getUserKey('systemSettings'), JSON.stringify(settings));
    showNotification('Configurações gerais salvas com sucesso!');
}

function saveAudioSettings() {
    const settings = JSON.parse(localStorage.getItem(getUserKey('systemSettings'))) || {};
    settings.microphone = document.getElementById('microphone').value;
    settings.speakers = document.getElementById('speakers').value;
    settings.camera = document.getElementById('camera').value;
    settings.noiseCancel = document.getElementById('noiseCancelSwitch').classList.contains('active');
    settings.echoCancel = document.getElementById('echoCancelSwitch').classList.contains('active');
    
    localStorage.setItem(getUserKey('systemSettings'), JSON.stringify(settings));
    showNotification('Configurações de áudio salvas com sucesso!');
}

function saveNotificationSettings() {
    const settings = JSON.parse(localStorage.getItem(getUserKey('systemSettings'))) || {};
    settings.callNotif = document.getElementById('callNotifSwitch').classList.contains('active');
    settings.msgNotif = document.getElementById('msgNotifSwitch').classList.contains('active');
    settings.soundNotif = document.getElementById('soundNotifSwitch').classList.contains('active');
    settings.dndMode = document.getElementById('dndMode').value;
    
    localStorage.setItem(getUserKey('systemSettings'), JSON.stringify(settings));
    showNotification('Configurações de notificação salvas!');
}

function saveAdvancedSettings() {
    const settings = JSON.parse(localStorage.getItem(getUserKey('systemSettings'))) || {};
    settings.devMode = document.getElementById('devModeSwitch').classList.contains('active');
    settings.debugLogs = document.getElementById('debugLogsSwitch').classList.contains('active');
    settings.sipServer = document.getElementById('sipServer').value;
    settings.sipPort = document.getElementById('sipPort').value;
    
    localStorage.setItem(getUserKey('systemSettings'), JSON.stringify(settings));
    showNotification('Configurações avançadas salvas!');
}

// Initialize on load
window.addEventListener('DOMContentLoaded', loadSettings);
    </script>
</body>
</html>